# SSO系统

## 1.SSO的出现

企业发展初期仅有一个或两个应用系统,每个系统都有自己的登录模块.用户每天用自己的账号登录，很方便！

但是随着企业的发展应用系统增加到10个,如果这个时候每个系统都有登录模块的话,用户访问不同的应用系统就要登录多次,有可能每一个系统的账号都不一样。对于用户来说就很不方便.

于是我们就想到有没有一种可能，用户仅登录一次就可访问所有的系统？

**Single Sign On(SSO)**中文名称单点登录,它的作用为:**在多个应用系统中，只需要登录一次，就可以访问其他相互信任的应用系统。**

![](images\SSO_思想.png)

上图中的 ApplicationServer1~3 为应用服务器,即包含所有的业务功能模块,但是没有登录认证功能模块.

上图中的 SSOServer 为单点登录服务器,即仅有登录功能，但是不包含任何业务功能.

## 2.实现技术点

### 2.1 Http无状态

HTTP无状态协议是指协议对于交互性场景没有记忆能力.

无状态是指无登录状态，即服务器不知道某个用户是否已登录过了。因为服务器不知道客户端是否已登录过了,所以每次都要在交互场景(会话)中请求中带上上一次的请求信息，如账号密码. 业务场景中需要对比账号密码来确定用户是否有权限使用那些接口。

### 2.2 会话机制 - token

使用基于 Token 的身份验证方法，在服务端不需要存储用户的登录记录。大概的流程是这样的：

​    1. 客户端使用用户名跟密码请求登录。

​    2.通过ajax向后端发送请求。

   3.服务端收到请求，去验证用户名与密码。

   4.验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端

​    5.客户端收到 Token 以后可以把它存储起来，放在 Local Storage 里

​    7.服务器验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据

## 3.SSO时序实现

![](images\SSO_时序.png)



